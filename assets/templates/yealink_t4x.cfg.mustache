{{! META: {
  "categories": [
    {"id": "sip",          "label": "SIP & Registration",    "icon": "üìû", "order": 1},
    {"id": "display",      "label": "Display & Audio",        "icon": "üì±", "order": 2},
    {"id": "security",     "label": "Security",               "icon": "üîë", "order": 3},
    {"id": "network",      "label": "Network",                "icon": "üåê", "order": 4},
    {"id": "call_features","label": "Call Features",          "icon": "üì≤", "order": 5},
    {"id": "provisioning", "label": "Provisioning & Time",    "icon": "üîß", "order": 6},
    {"id": "diagnostics",  "label": "Diagnostics & Logs",     "icon": "üîç", "order": 7}
  ],
  "variables": [
    {"name": "sip_server",      "category": "sip",           "description": "Primary SIP registrar address.", "example": "pbx.example.com", "default": ""},
    {"name": "sip_port",        "category": "sip",           "description": "SIP signalling port.", "example": "5060", "default": "5060"},
    {"name": "transport",       "category": "sip",           "description": "SIP transport: UDP, TCP, TLS or DNS-SRV.", "example": "UDP", "default": "UDP"},
    {"name": "reg_expiry",      "category": "sip",           "description": "Registration expiry in seconds.", "example": "3600", "default": "3600"},
    {"name": "outbound_proxy_host","category":"sip",          "description": "Outbound proxy / SBC hostname or IP.", "example": "sbc.example.com", "default": ""},
    {"name": "backup_server",   "category": "sip",           "description": "Backup SIP server address.", "example": "pbx2.example.com", "default": ""},
    {"name": "voicemail_number","category": "call_features",  "description": "MWI subscribe / voicemail access number.", "example": "*97", "default": ""},
    {"name": "wallpaper_url",   "category": "display",       "description": "HTTP URL of the background image file.", "example": "http://192.168.1.1:8080/media/logo.jpg", "default": ""},
    {"name": "ring_type",       "category": "display",       "description": "Ringtone filename or URL.", "example": "Ring1.wav", "default": "Ring1.wav"},
    {"name": "screensaver_timeout","category":"display",      "description": "Idle seconds before screensaver activates (0 = disabled).", "example": "120", "default": "0"},
    {"name": "admin_password",  "category": "security",      "description": "New admin password (applied as admin:<new>).", "example": "Str0ngP@ss", "default": ""},
    {"name": "web_ui_enabled",  "category": "security",      "description": "Enable (1) or disable (0) the phone web server.", "example": "1", "default": "1"},
    {"name": "voice_vlan_id",   "category": "network",       "description": "802.1Q VLAN ID for voice traffic.", "example": "100", "default": ""},
    {"name": "data_vlan_id",    "category": "network",       "description": "802.1Q VLAN ID for the PC port.", "example": "1", "default": ""},
    {"name": "cdp_lldp_enabled","category": "network",       "description": "Enable (1) or disable (0) CDP and LLDP neighbour discovery.", "example": "1", "default": "1"},
    {"name": "auto_answer",     "category": "call_features",  "description": "Enable (1) auto-answer on the first line.", "example": "1", "default": "0"},
    {"name": "dnd_enabled",     "category": "call_features",  "description": "Enable (1) Do Not Disturb by default.", "example": "0", "default": "0"},
    {"name": "call_waiting",    "category": "call_features",  "description": "Enable (1) call waiting.", "example": "1", "default": "1"},
    {"name": "cfw_always",      "category": "call_features",  "description": "Call forward unconditionally to this number.", "example": "+61400000000", "default": ""},
    {"name": "cfw_busy",        "category": "call_features",  "description": "Call forward on busy to this number.", "example": "voicemail", "default": ""},
    {"name": "cfw_no_answer",   "category": "call_features",  "description": "Call forward on no-answer to this number.", "example": "voicemail", "default": ""},
    {"name": "dial_plan",       "category": "call_features",  "description": "Yealink digitmap dial plan string.", "example": "(x+|\\+x+|xxx|xx+)", "default": ""},
    {"name": "ntp_server",      "category": "provisioning",  "description": "Primary NTP time server hostname or IP.", "example": "0.pool.ntp.org", "default": "0.pool.ntp.org"},
    {"name": "timezone",        "category": "provisioning",  "description": "Yealink timezone offset string (e.g. +10).", "example": "+10", "default": "UTC"},
    {"name": "dst_enable",      "category": "provisioning",  "description": "Daylight saving time: 0=off, 1=automatic, 2=manual.", "example": "1", "default": "0"},
    {"name": "provisioning_url","category": "provisioning",  "description": "Auto-provisioning server base URL.", "example": "http://192.168.1.1:8080", "default": ""},
    {"name": "syslog_server",   "category": "diagnostics",   "description": "Remote syslog server IP or hostname.", "example": "192.168.1.50", "default": ""},
    {"name": "debug_level",     "category": "diagnostics",   "description": "Syslog verbosity level (0-6, higher = more detail).", "example": "3", "default": "0"}
  ]
} }}
#!version:1.0.0.1
## Pocket Provisioner - Yealink T3x/T4x/T5x ##

{{#lines}}
# ACCOUNT {{line_index}}
account.{{line_index}}.enable = 1
account.{{line_index}}.label = {{label}}
account.{{line_index}}.display_name = {{display_name}}
account.{{line_index}}.auth_name = {{auth_name}}
account.{{line_index}}.user_name = {{user_name}}
account.{{line_index}}.password = {{password}}
account.{{line_index}}.sip_server.1.address = {{sip_server}}
account.{{line_index}}.sip_server.1.port = {{sip_port}}
account.{{line_index}}.sip_server.1.transport_type = {{transport_code}}
# transport_type: 0=UDP 1=TCP 2=TLS 3=DNS-SRV
account.{{line_index}}.sip_server.1.expires = {{expires}}
{{#has_outbound_proxy}}
account.{{line_index}}.outbound_proxy_enable = 1
account.{{line_index}}.outbound_proxy.1.address = {{outbound_proxy_host}}
account.{{line_index}}.outbound_proxy.1.port = {{outbound_proxy_port}}
{{/has_outbound_proxy}}
{{#has_backup_server}}
account.{{line_index}}.sip_server.2.address = {{backup_server}}
account.{{line_index}}.sip_server.2.port = {{backup_port}}
{{/has_backup_server}}
{{#has_voicemail}}
account.{{line_index}}.voicemail.number = {{voicemail_number}}
{{/has_voicemail}}
{{#has_auto_answer}}
account.{{line_index}}.auto_answer = {{auto_answer}}
{{/has_auto_answer}}
{{/lines}}

# DISPLAY
phone_setting.backgrounds = {{wallpaper_url}}
phone_setting.ring_type = {{ring_type}}
{{#has_screensaver_timeout}}
screensaver.wait_time = {{screensaver_timeout}}
{{/has_screensaver_timeout}}

{{#vlan_enabled}}
# VLAN
static.network.vlan.internet_port_enable = 1
static.network.vlan.internet_port_vid = {{voice_vlan_id}}
static.network.vlan.pc_port_enable = 1
static.network.vlan.pc_port_vid = {{data_vlan_id}}
{{/vlan_enabled}}

{{#has_cdp_lldp}}
# CDP / LLDP
network.lldp.enable = {{cdp_lldp_enabled}}
network.cdp.enable = {{cdp_lldp_enabled}}
{{/has_cdp_lldp}}

{{#has_dnd}}
# DO NOT DISTURB
features.dnd.enable = {{dnd_enabled}}
{{/has_dnd}}

{{#has_call_waiting}}
# CALL WAITING
features.call_waiting.enable = {{call_waiting}}
{{/has_call_waiting}}

{{#has_cfw_always}}
# CALL FORWARD ALWAYS
forward.always.enable = 1
forward.always.target = {{cfw_always}}
{{/has_cfw_always}}

{{#has_cfw_busy}}
# CALL FORWARD BUSY
forward.busy.enable = 1
forward.busy.target = {{cfw_busy}}
{{/has_cfw_busy}}

{{#has_cfw_no_answer}}
# CALL FORWARD NO ANSWER
forward.no_answer.enable = 1
forward.no_answer.target = {{cfw_no_answer}}
{{/has_cfw_no_answer}}

{{#has_dial_plan}}
# DIAL PLAN
dialplan.digitmap = {{dial_plan}}
{{/has_dial_plan}}

{{#line_keys}}
linekey.{{position}}.type = {{type_code}}
linekey.{{position}}.value = {{key_value}}
linekey.{{position}}.label = {{key_label}}
linekey.{{position}}.line = {{key_line}}
{{#is_blf}}
linekey.{{position}}.pickup_value = {{pickup_code}}
{{/is_blf}}
{{/line_keys}}

{{#expansion_keys}}
expansion_module.{{module}}.key.{{position}}.type = {{type_code}}
expansion_module.{{module}}.key.{{position}}.value = {{key_value}}
expansion_module.{{module}}.key.{{position}}.label = {{key_label}}
{{/expansion_keys}}

{{#remote_phonebooks}}
remote_phonebook.data.{{index}}.url = {{url}}
remote_phonebook.data.{{index}}.name = {{name}}
{{/remote_phonebooks}}

# NTP / TIME
local_time.ntp_server1 = {{ntp_server}}
local_time.ntp_server2 = 1.pool.ntp.org
local_time.time_zone = {{timezone}}
local_time.summer_time = {{dst_enable}}

# AUTO PROVISIONING
static.auto_provision.server.url = {{provisioning_url}}
static.auto_provision.server.username = {{provision_user}}
static.auto_provision.server.password = {{provision_pass}}
static.auto_provision.enable = 1
static.auto_provision.power_on = 1
static.auto_provision.custom.protect = 0
static.auto_provision.reboot_force.enable = 1
features.show_quick_setup.enable = 0

# SECURITY
# Format: static.security.user_password = <current_password>:<new_password>
# Use "admin:" prefix to set new password when current is default "admin"
static.security.user_password = admin:{{admin_password}}
{{#has_web_ui}}
web_server.enabled = {{web_ui_enabled}}
{{/has_web_ui}}

{{#has_syslog}}
# SYSLOG
syslog.mode = 2
syslog.server = {{syslog_server}}
{{/has_syslog}}
